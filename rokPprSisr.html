<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissor</title>
    </head>
    <body>
        <p>Enjoy !-!</p>


        <script>
            let rps = ["Rock", "Paper", "Scissors"];

            let computerPlay = function(){
                return Math.floor(Math.random() * 3);
            }

            let roundPlay = function(playerSelection, computerSelection){
                if(playerSelection == computerSelection)return 0;
                else if((playerSelection == 0 && computerSelection == 2) || 
                        (playerSelection == 1 && computerSelection == 0) ||
                        (playerSelection == 2 && computerSelection == 1)){
                            return 1;
                        }
                else return -1;        
            }

            let getInput = function(){
                while(true){
                    let inp = prompt("Choose Rock, paper or scissors", "Rock");
                    for(let i =0; i<3; i++){
                        if(inp.toLowerCase() == rps[i].toLowerCase())return i;
                    }
                    alert("Invalid choice!! check for spelling mistakes...");
                }
            }

            let game = function(numOfRounds){
                let playerScore = 0;
                let computerScore = 0;
                while(numOfRounds--){
                    let playerSelection = getInput();
                    let computerSelection = computerPlay();
                    let result = roundPlay(playerSelection, computerSelection);
                    if(result == 1){
                        playerScore++;
                        console.log("You Win!! "+rps[playerSelection]+" beats "+rps[computerSelection]);
                    } else if(result == -1){
                        computerScore++;
                        console.log("You Lose!! "+rps[computerSelection]+" beats "+rps[playerSelection]);
                    } else {
                        numOfRounds++;
                        console.log("Its a tie");
                    }
                }
                if(playerScore > computerScore){
                    alert("Congratulations!! You have won");
                    console.log("Congratulations!! You have won");
                } else {
                    alert("You lost to a bot.");
                    console.log("You lost to a bot.");
                }
                console.log("Scores:\n\tPlayer:\t\t"+playerScore+"\n\tComputer:\t"+computerScore);
            }
            
            game(5);

        </script>
    </body>

</html>
